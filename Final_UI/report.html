<html>
<head>
<meta charset="utf-8">
<title>RoadRadar</title>
  <!-- <title>Eventloot</title> -->
  <meta name="description" content="">
  <link rel="shortcut icon" href="images/favicon.png">
  <meta name="viewport" content="width=device-width">
<!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="bower_components/bootstrap/bootstrap.min.css">
<!-- Optional theme -->
<!-- <script src="bower_components/jquery/jquery.js"></script> -->
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<!-- <script src="bower_components/jquery/jquery.js"></script> -->
  <script src="bower_components/bootstrap/bootstrap.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
 <link rel="stylesheet" type="text/css" href="css/style.css">
   <style>
	html,
  body,
  #map_canvas {
	margin: 0;
	padding: 0;
	height: 100%
		}
	  </style>
</head>
<body>
  <header>
   <!-- header start-->
	<div class="container-fluid">
	  <div class="row">
		<nav class="navbar no-margin no-border">
		  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
			 <!-- <div class="container nopadding"> -->
			<!-- Brand and toggle get grouped for better mobile display -->
			<!-- <div class="navbar-header"> -->
			  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 logo-div">
				<a class="navbar-brand" href="index.html"><img src="images/logo.png"></a>
			  </div>
			<!-- </div> -->
			<div class="col-lg-8 col-md-8 col-sm-8col-xs-8 menu-div">
			  <ul class="nav navbar-nav navbar-right">
				<li><a href="explore.html">EXPLORE</a></li>
				<li><a href="itinerary.html">ITINERARY</a></li>
				<li><a href="report.html">REPORT ISSUE</a></li>
				<li><a href="contact-us.html">ABOUT US</a></li>
			  </ul>
			  <!-- Collect the nav links, forms, and other content for toggling -->
			</div>
		  </div>
		</nav>
	  </div>
	</div>  <!-- /.container-fluid -->
  </header> <!-- header ends -->
<section class="report-section no-padding no-margin no-border"> 
  <div class="container-fluid">
	<div class="row">
	  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 report-div"> 
		<!-- <div class=" col-lg-offset-6 col-lg-6 col-md-offset-6 col-md-6 col-sm-12 col-xs-12 map-style-div"> -->
		  <input id="lat" val="40.713956" placeholder="Latitude" hidden="" />
		  <input id="long" val="74.006653" placeholder="Longitude" hidden="" />
		<!-- </div> -->
		<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 report-option-div">
		<div class="steps-div">
			<strong>Steps to Report an Issue:</strong>
			<p>1. Choose the type of issue from dropdown.</p>
			<p>2. Choose the location on map where issue is.</p>
			<p>3. Click Report an Issue.</p>
		</div>
		<div class="types-div">
		<strong>Types of Issue:</strong>
			  <select class="form-control" id="types-id">
				  <option value="potholes" >Potholes</option>
				  <option value="cracks">Cracks</option>
				  <option value="others" selected="selected">Others</option>
			  </select>
		  </div>
		  <!-- <div> -->

		  <div class="option-div">
			<img src="images/potholes.png">
			<div class="text-div"><p>A pothole is a structural failure in a road surface, caused by the presence of water in the underlying soil and the presence of traffic passing over the area.</p></div>
		  </div>
		  <div class="option-div">
			<img src="images/cracks.png">
			<div class="text-div"><p>Road cracks are a common type of distress in the asphalt pavement. They are caused by environmental condition, like rain,  poor drainage, and heavy traffic.</p></div>
			</div>
		  <div class="option-div">
			<img src="images/others.png">
			<div class="text-div"><p>These category stands for the other types of road structural failures. Let us know which you are most concerned about, we will make a specific category for it.</p></div>
		  </div>
			<button type="button" class="btn btn-default" id="report">Report an Issue</button>
			<p class="result" id="error">Error!</p>
			<p class="result" id="success">Success!</p>
		</div>
		<div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 map-div" id="map_canvas">
		</div>
	  </div>
	  </div>
	</div>
</section>

<!-- <div class="error-div" id="error">
	<div class="inner-div">
		<h2>Please put the Location and Issue first.</h2>
	</div>
</div> -->
<!-- <div class="success-div" id="success">
	<div class="inner-div">
		<h2>Thank you for your Support.</h2>
	</div>
</div> -->

<script>
var map;
var marker;

function initMap() {
  var myLatlng = new google.maps.LatLng(-37.80978395301097, 144.96511459350586);

  var myOptions = {
	zoom: 8,
	center: myLatlng,
	mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  marker = new google.maps.Marker({
	draggable: true,
	position: myLatlng,
	map: map,
	title: "My issue"
  });

  google.maps.event.addListener(marker, 'dragend', function(event) {


	document.getElementById("lat").value = event.latLng.lat();
	document.getElementById("long").value = event.latLng.lng();
  });

  google.maps.event.addListener(map, 'click', function(event) {


	document.getElementById("lat").value = event.latLng.lat();
	document.getElementById("long").value = event.latLng.lng();
	marker.setPosition(event.latLng);
  });
}
google.maps.event.addDomListener(window, "load", initialize());

	</script>
	  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCUOEfSlgXlMJwMgLi3zqh__TqWk0Z6YiE&callback=initMap">
	</script>

<!-- Rights Part Ends -->
<section class="rights-section no-padding no-border">
	<div class="container">
	  <div class="row">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 rights-div">
		<h4>All Rights Reserved - ROADRADAR</h4>
		</div>
	  </div>
	</div>
</section>
<!-- Rights Part Ends -->
<script>
  $('#report').click(function() {
	var abc= document.getElementById('lat').value;
	var def = document.getElementById('long').value;
	var xyz =  document.getElementById('types-id').value;
	console.log (abc);
	console.log (def);
	console.log (xyz);
	if(abc == '' && def == '') {
	  	$('#error').addClass('show');
		setTimeout(function() {
			$('#error').removeClass('show');
		}, 3000);
	} else {
	  $('#success').addClass('show');
		setTimeout(function() {
			$('#success').removeClass('show');
		}, 3000);
		// $.ajax({
		// 	url: 'http://118.138.90.236:8080/roadDB/webresources/entities.reporttable/putReport/',
		// 	type: 'GET',
		// 	data:  JSON.stringify({ISSUE_TYPE: xyz, LATITUDE: abc, LONGTITUDE: def}), dataType:'json',
		// 	// data: '{"ISSUE_TYPE":"Cracks", "LATITUDE":"345678", "LONGTITUDE":"34567"}',
		// 	crossDomain: true
  //   		// dataType: 'jsonp'
		// 	// success: function(data2) {
		// 	// 	console.log(data2);
		// 	// },
		// 	// error: function(error) {
		// 	// 	console.log(error);
		// 	// }

		// });
		// var url = 'http://118.138.90.236:8080/roadDB/webresources/entities.reporttable/putReport/'
		// $.post(url, {ISSUE_TYPE: xyz, LATITUDE: abc, LONGTITUDE: def}, 
  //       function(data) {
  //       	console.log(data);
  //       });

  	$.get("http://www.118.138.90.236:8080/roadDB/webresources/entities.reporttable/putReport/"+ xyz + "/"+ abc + "/" + def, 
        function(data) {
        	console.log(data);
        },"json")
	}
  })

// "http://localhost:8080/TEST/webresources/service.reporttable/putReport/
 // + xyz + '/' + abc + '/' + def
</script>
  </body>
  </html>